(this["webpackJsonpspa-crud-frontend"]=this["webpackJsonpspa-crud-frontend"]||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var s=a(3),i=a(0),n=a.n(i),r=a(11),c=a.n(r),o=a(25),l=a(19),h=a(28),d=a(29),b=a(27),j=a(36),u=a(35),p=a(12),m=a(191),g=a(87),O=a(37),f=a(177),v=a(179),x=a(180),C=a(181),y=a(196),k=a(175),L=a(10),S=a(80),w=a.n(S),T=a(81),N=a.n(T),D=a(86),I=a(195),R=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(O.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(O.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(L.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(L.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(O.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function q(e){var t=R(),a=n.a.useState(null),i=Object(g.a)(a,2),r=i[0],c=i[1],l=Boolean(r),h=function(){c(null)};return Object(s.jsx)("div",{className:t.root,children:Object(s.jsx)(f.a,{position:"static",children:Object(s.jsxs)(v.a,{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(x.a,{edge:"start","aria-label":"menu",onClick:function(e){c(e.currentTarget)},color:"inherit",children:Object(s.jsx)(w.a,{})}),Object(s.jsxs)(D.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:h,children:[Object(s.jsx)(I.a,{onClick:h,component:o.b,to:"/",children:"Home"}),Object(s.jsx)(I.a,{onClick:h,component:o.b,to:"/create",children:"Add member"})]})]}),Object(s.jsx)(C.a,{variant:"h6",className:t.title,children:e.navbartitle}),Object(s.jsxs)("div",{className:t.search,children:[Object(s.jsx)("div",{className:t.searchIcon,children:Object(s.jsx)(N.a,{})}),Object(s.jsx)(y.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:e.handleSearch,value:e.search})]})]})})})}var B=a(185),E=a(187),M=a(183),A=a(184),F=a(186),P=a(182),U=a(137),z=a(188),G=a(85),J=a.n(G),V=a(84),H=a.n(V),K=a(83),Q=a.n(K),W=a(82),X=a.n(W).a.create({baseURL:"https://spa-crud-backend.heckenspringen.de/api",headers:{"Content-type":"application/json"}}),Y=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).delete=s.delete.bind(Object(b.a)(s)),s}return Object(d.a)(a,[{key:"delete",value:function(e){var t=this;X.delete("/member/"+this.props.obj.id).then((function(e){t.props.getData(),console.log("Deleted")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(s.jsxs)(P.a,{children:[Object(s.jsx)(M.a,{component:"th",scope:"row",children:this.props.obj.id}),Object(s.jsx)(M.a,{align:"left",children:this.props.obj.firstname}),Object(s.jsx)(M.a,{align:"left",children:this.props.obj.lastname}),Object(s.jsx)(M.a,{align:"left",children:this.props.obj.birthday}),Object(s.jsxs)(M.a,{align:"left",children:[this.props.obj.street,", ",this.props.obj.city]}),Object(s.jsxs)(M.a,{align:"right",children:[Object(s.jsx)(x.a,{"aria-label":"view",component:o.b,to:"/view/"+this.props.obj.id,children:Object(s.jsx)(Q.a,{})}),Object(s.jsx)(x.a,{"aria-label":"edit",component:o.b,color:"primary",to:"/edit/"+this.props.obj.id,children:Object(s.jsx)(H.a,{})}),Object(s.jsx)(x.a,{"aria-label":"delete",color:"secondary",onClick:this.delete,children:Object(s.jsx)(J.a,{})})]})]},this.props.obj.id)}}]),a}(i.Component),Z=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).getData=function(e){s.setState({members:[],isLoading:!0});var t="";s.state.searchTerm&&(t="/"+s.state.searchTerm),X.get("/members"+t).then((function(e){s.setState({members:e.data,isLoading:!1}),console.log(e)})).catch((function(e){console.log(e)}))},s.state={isLoading:!0,members:[],searchTerm:""},s.props.onNavbarTitleChange("All members"),s}return Object(d.a)(a,[{key:"simplifiedFunction",value:function(e){console.log(e)}},{key:"componentDidUpdate",value:function(e){e.search!==this.props.search&&(this.setState({searchTerm:this.props.search}),this.getData())}},{key:"componentDidMount",value:function(){this.getData()}},{key:"tabRow",value:function(){var e=this;return this.state.members.map((function(t,a){return Object(s.jsx)(Y,{obj:t,getData:e.getData},a)}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)(A.a,{component:U.a,children:Object(s.jsxs)(B.a,{children:[Object(s.jsx)(F.a,{children:Object(s.jsxs)(P.a,{children:[Object(s.jsx)(M.a,{children:"ID"}),Object(s.jsx)(M.a,{align:"left",children:"Firstname"}),Object(s.jsx)(M.a,{align:"left",children:"Lastname"}),Object(s.jsx)(M.a,{align:"left",children:"Birthday"}),Object(s.jsx)(M.a,{align:"left",children:"Adress"}),Object(s.jsx)(M.a,{align:"right",children:"Actions"})]})}),Object(s.jsx)(E.a,{children:!this.state.isLoading&&(this.state.members.length>0?this.tabRow():Object(s.jsx)(P.a,{children:Object(s.jsx)(M.a,{align:"center",colSpan:5,children:"No data"})}))})]})}),this.state.isLoading&&Object(s.jsx)(z.a,{})]})}}]),a}(i.Component),$=a(193),_=a(189),ee=a(192),te=a(190),ae=a(194),se=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;switch(Object(h.a)(this,a),(s=t.call(this,e)).handleChange=s.handleChange.bind(Object(b.a)(s)),s.onSubmit=s.onSubmit.bind(Object(b.a)(s)),s.state={message:"",error:!1,isLoading:!0,disabled:!1,url:"",errorfields:[],form:{firstname:"",lastname:"",birthday:"",street:"",city:"",phone:"",email:""}},s.props.formmode){case"edit":s.props.onNavbarTitleChange("Edit member"),s.state=Object(l.a)(Object(l.a)({},s.state),{},{button:"Update",url:"/"+s.props.match.params.id,isLoading:!0});break;case"create":s.props.onNavbarTitleChange("Create member"),s.state=Object(l.a)(Object(l.a)({},s.state),{},{button:"Create"});break;default:case"view":s.props.onNavbarTitleChange("View member"),s.state=Object(l.a)(Object(l.a)({},s.state),{},{button:!1,url:"/"+s.props.match.params.id,disabled:!0,isLoading:!0})}return s}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState({form:Object(l.a)(Object(l.a)({},this.state.form),{},Object(O.a)({},e.target.id,e.target.value))})}},{key:"componentDidMount",value:function(){var e=this;""!==this.state.url&&X.get("/member"+this.state.url).then((function(t){e.setState({form:t.data,isLoading:!1})})).catch((function(e){console.log(e),this.setState({isLoading:!1})}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),X.post("/member/"+this.props.match.params.id,this.state.form).then((function(e){console.log(e.data),t.setState({error:!1,message:"Done!",disabled:!0}),setTimeout((function(){return t.props.history.push("/")}),1e3)})).catch((function(e){if(e.response){if(console.log(e.response.data),e.response.data.errors){var a=e.response.data.errors.map((function(e){return Object(s.jsxs)("div",{children:["- ",e]})}));t.setState({error:!0,errorfields:e.response.data.errorfields?e.response.data.errorfields:[],message:a})}}else console.log("Error",e.message),t.setState({error:!0,message:"Something failed at backend"})})),console.log(this.state)}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[this.state.isLoading&&Object(s.jsx)(z.a,{}),this.state.message&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(ae.a,{severity:this.state.error?"error":this.state.disabled?"success":"info",children:this.state.message}),Object(s.jsx)("br",{})]}),Object(s.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit,children:Object(s.jsxs)(_.a,{children:[Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"firstname",variant:"outlined",label:"Firstname",shrink:"true",required:!0,disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("firstname"),value:this.state.form.firstname,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"lastname",variant:"outlined",label:"Lastname",shrink:"true",required:!0,disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("lastname"),value:this.state.form.lastname,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"birthday",variant:"outlined",label:"Birthday",InputLabelProps:{shrink:!0},type:"date",required:!0,disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("birthday"),value:this.state.form.birthday,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"street",variant:"outlined",label:"Street",shrink:"true",required:!0,disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("street"),value:this.state.form.street,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"city",variant:"outlined",label:"City",shrink:"true",required:!0,disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("city"),value:this.state.form.city,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"phone",variant:"outlined",label:"Phone",shrink:"true",disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("phone"),value:this.state.form.phone,onChange:this.handleChange})}),Object(s.jsx)(ee.a,{margin:1,children:Object(s.jsx)($.a,{id:"email",variant:"outlined",label:"eMail",shrink:"true",disabled:this.state.disabled||this.state.isLoading,error:this.state.errorfields.includes("email"),value:this.state.form.email,type:"email",onChange:this.handleChange})}),this.state.button&&Object(s.jsx)(te.a,{type:"submit",variant:"contained",disabled:this.state.disabled||this.state.isLoading,color:"primary",children:this.state.button})]})})]})}}]),a}(i.Component),ie=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).handleNavbarTitleChange=s.handleNavbarTitleChange.bind(Object(b.a)(s)),s.state={search:"",navbartitle:"Main"},s}return Object(d.a)(a,[{key:"handleSearch",value:function(e){this.setState({search:e.target.value})}},{key:"handleNavbarTitleChange",value:function(e){this.setState({navbartitle:e})}},{key:"render",value:function(){var e=this;return Object(s.jsx)(o.a,{children:Object(s.jsxs)(m.a,{children:[Object(s.jsx)(q,{search:this.state.search,handleSearch:this.handleSearch.bind(this),navbartitle:this.state.navbartitle}),Object(s.jsx)("br",{}),Object(s.jsxs)(p.c,{children:[Object(s.jsx)(p.a,{path:"/view/:id",render:function(t){return Object(s.jsx)(se,Object(l.a)({formmode:"view",onNavbarTitleChange:e.handleNavbarTitleChange},t))}}),Object(s.jsx)(p.a,{exact:!0,path:"/create",render:function(t){return Object(s.jsx)(se,Object(l.a)({formmode:"create",onNavbarTitleChange:e.handleNavbarTitleChange},t))}}),Object(s.jsx)(p.a,{path:"/edit/:id",render:function(t){return Object(s.jsx)(se,Object(l.a)({formmode:"edit",onNavbarTitleChange:e.handleNavbarTitleChange},t))}}),Object(s.jsx)(p.a,{path:"/",render:function(){return Object(s.jsx)(Z,{search:e.state.search,onNavbarTitleChange:e.handleNavbarTitleChange})}})]})]})})}}]),a}(i.Component);c.a.render(Object(s.jsx)(o.a,{children:Object(s.jsx)(ie,{})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.b63732db.chunk.js.map