(this["webpackJsonpspa-crud-frontend"]=this["webpackJsonpspa-crud-frontend"]||[]).push([[0],{139:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a(0),i=a.n(n),r=a(11),c=a.n(r),o=a(30),l=a(32),h=a(19),d=a(20),b=a(24),j=a(23),u=a(22),m=a(12),g=a(191),p=a(88),O=a(29),f=a(177),v=a(179),x=a(180),C=a(181),y=a(196),k=a(175),S=a(10),L=a(81),T=a.n(L),w=a(82),N=a.n(w),D=a(87),q=a(195),I=Object(k.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(O.a)({flexGrow:1,display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(O.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(S.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(S.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(O.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));function R(e){var t=I(),a=i.a.useState(null),n=Object(p.a)(a,2),r=n[0],c=n[1],l=Boolean(r),h=function(){c(null)};return Object(s.jsx)("div",{className:t.root,children:Object(s.jsx)(f.a,{position:"static",children:Object(s.jsxs)(v.a,{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(x.a,{edge:"start","aria-label":"menu",onClick:function(e){c(e.currentTarget)},color:"inherit",children:Object(s.jsx)(T.a,{})}),Object(s.jsxs)(D.a,{anchorEl:r,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:h,children:[Object(s.jsx)(q.a,{onClick:h,component:o.b,to:"/",children:"Home"}),Object(s.jsx)(q.a,{onClick:h,component:o.b,to:"/create",children:"Add member"})]})]}),Object(s.jsx)(C.a,{variant:"h6",className:t.title,children:e.navbartitle}),Object(s.jsxs)("div",{className:t.search,children:[Object(s.jsx)("div",{className:t.searchIcon,children:Object(s.jsx)(N.a,{})}),Object(s.jsx)(y.a,{placeholder:"Search\u2026",classes:{root:t.inputRoot,input:t.inputInput},inputProps:{"aria-label":"search"},onChange:e.handleSearch,value:e.search})]})]})})})}var F=a(193),B=a(182),M=a(192),E=a(183),A=a(194),P=a(83),U=a.n(P).a.create({baseURL:"https://spa-crud-backend.heckenspringen.de/api",headers:{"Content-type":"application/json"}}),V=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).props.onNavbarTitleChange("Create member"),s.handleChange=s.handleChange.bind(Object(b.a)(s)),s.onSubmit=s.onSubmit.bind(Object(b.a)(s)),s.state={message:"",error:!1,isLoading:!1,success:!1,errorfields:[],form:{}},s}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState({form:Object(l.a)(Object(l.a)({},this.state.form),{},Object(O.a)({},e.target.id,e.target.value))})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),U.post("/member",this.state.form).then((function(e){console.log(e.data),t.setState({error:!1,message:"Done!",success:!0}),setTimeout((function(){return t.props.history.push("/")}),1e3)})).catch((function(e){if(console.log(e.response),e.response){if(e.response.data.errors){var a=e.response.data.errors.map((function(e){return Object(s.jsxs)("div",{children:["- ",e]})}));t.setState({error:!0,errorfields:e.response.data.errorfields?e.response.data.errorfields:[],message:a})}}else t.setState({error:!0,message:"Something failed at backend"})})),console.log(this.state)}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[this.state.message&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(A.a,{severity:this.state.error?"error":this.state.success?"success":"info",children:this.state.message}),Object(s.jsx)("br",{})]}),Object(s.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit,children:Object(s.jsxs)(B.a,{children:[Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"firstname",variant:"outlined",label:"Firstname",required:!0,disabled:this.state.success,error:this.state.errorfields.includes("firstname"),autoFocus:!0,onChange:this.handleChange},"firstname")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"lastname",variant:"outlined",label:"Lastname",required:!0,disabled:this.state.success,error:this.state.errorfields.includes("lastname"),onChange:this.handleChange},"lastname")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"birthday",variant:"outlined",label:"Birthday",InputLabelProps:{shrink:!0},type:"date",required:!0,disabled:this.state.success,error:this.state.errorfields.includes("birthday"),onChange:this.handleChange},"birthday")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"street",variant:"outlined",label:"Street",required:!0,disabled:this.state.success,error:this.state.errorfields.includes("street"),onChange:this.handleChange},"street")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"city",variant:"outlined",label:"City",required:!0,disabled:this.state.success,error:this.state.errorfields.includes("city"),onChange:this.handleChange},"city")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"phone",variant:"outlined",label:"Phone",disabled:this.state.success,error:this.state.errorfields.includes("phone"),onChange:this.handleChange},"phone")}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"email",variant:"outlined",label:"eMail",disabled:this.state.success,error:this.state.errorfields.includes("email"),type:"email",onChange:this.handleChange},"email")}),Object(s.jsx)(E.a,{type:"submit",variant:"contained",disabled:this.state.success,color:"primary",children:"Create"})]})})]})}}]),a}(n.Component),z=a(184),G=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).props.onNavbarTitleChange("Edit member"),s.handleChange=s.handleChange.bind(Object(b.a)(s)),s.onSubmit=s.onSubmit.bind(Object(b.a)(s)),s.state={message:"",error:!1,isLoading:!0,success:!1,errorfields:[],form:{firstname:"",lastname:"",birthday:"",street:"",city:"",phone:"",email:""}},console.log(e),s}return Object(d.a)(a,[{key:"handleChange",value:function(e){this.setState({form:Object(l.a)(Object(l.a)({},this.state.form),{},Object(O.a)({},e.target.id,e.target.value))})}},{key:"componentDidMount",value:function(){var e=this;U.get("/member/"+this.props.match.params.id).then((function(t){e.setState({isLoading:!1,form:t.data})})).catch((function(e){console.log(e)}))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault(),U.post("/member/"+this.props.match.params.id,this.state.form).then((function(e){console.log(e.data),t.setState({error:!1,message:"Done!",success:!0}),setTimeout((function(){return t.props.history.push("/")}),1e3)})).catch((function(e){if(e.response){if(console.log(e.response.data),e.response.data.errors){var a=e.response.data.errors.map((function(e){return Object(s.jsxs)("div",{children:["- ",e]})}));t.setState({error:!0,errorfields:e.response.data.errorfields?e.response.data.errorfields:[],message:a})}}else console.log("Error",e.message),t.setState({error:!0,message:"Something failed at backend"})})),console.log(this.state)}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[this.state.isLoading&&Object(s.jsx)(z.a,{}),this.state.message&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(A.a,{severity:this.state.error?"error":this.state.success?"success":"info",children:this.state.message}),Object(s.jsx)("br",{})]}),Object(s.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:this.onSubmit,children:Object(s.jsxs)(B.a,{children:[Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"firstname",variant:"outlined",label:"Firstname",shrink:"true",required:!0,disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("firstname"),value:this.state.form.firstname,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"lastname",variant:"outlined",label:"Lastname",shrink:"true",required:!0,disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("lastname"),value:this.state.form.lastname,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"birthday",variant:"outlined",label:"Birthday",shrink:"true",required:!0,disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("birthday"),value:this.state.form.birthday,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"street",variant:"outlined",label:"Street",shrink:"true",required:!0,disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("street"),value:this.state.form.street,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"city",variant:"outlined",label:"City",shrink:"true",required:!0,disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("city"),value:this.state.form.city,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"phone",variant:"outlined",label:"Phone",shrink:"true",disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("phone"),value:this.state.form.phone,onChange:this.handleChange})}),Object(s.jsx)(M.a,{margin:1,children:Object(s.jsx)(F.a,{id:"email",variant:"outlined",label:"eMail",shrink:"true",disabled:this.state.success||this.state.isLoading,error:this.state.errorfields.includes("email"),value:this.state.form.email,type:"email",onChange:this.handleChange})}),Object(s.jsx)(E.a,{type:"submit",variant:"contained",disabled:this.state.success||this.state.isLoading,color:"primary",children:"Update"})]})})]})}}]),a}(n.Component),J=a(188),H=a(190),K=a(186),Q=a(187),W=a(189),X=a(185),Y=a(141),Z=a(86),$=a.n(Z),_=a(85),ee=a.n(_),te=a(84),ae=a.n(te),se=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).delete=s.delete.bind(Object(b.a)(s)),s}return Object(d.a)(a,[{key:"delete",value:function(e){var t=this;U.delete("/member/"+this.props.obj.id).then((function(e){t.props.getData(),console.log("Deleted")})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(s.jsxs)(X.a,{children:[Object(s.jsx)(K.a,{component:"th",scope:"row",children:this.props.obj.id}),Object(s.jsx)(K.a,{align:"left",children:this.props.obj.firstname}),Object(s.jsx)(K.a,{align:"left",children:this.props.obj.lastname}),Object(s.jsx)(K.a,{align:"left",children:this.props.obj.birthday}),Object(s.jsxs)(K.a,{align:"left",children:[this.props.obj.street,", ",this.props.obj.city]}),Object(s.jsxs)(K.a,{align:"right",children:[Object(s.jsx)(x.a,{"aria-label":"view",component:o.b,to:"/view/"+this.props.obj.id,children:Object(s.jsx)(ae.a,{})}),Object(s.jsx)(x.a,{"aria-label":"edit",component:o.b,color:"primary",to:"/edit/"+this.props.obj.id,children:Object(s.jsx)(ee.a,{})}),Object(s.jsx)(x.a,{"aria-label":"delete",color:"secondary",onClick:this.delete,children:Object(s.jsx)($.a,{})})]})]},this.props.obj.id)}}]),a}(n.Component),ne=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).getData=function(e){s.setState({members:[],isLoading:!0});var t="";s.state.searchTerm&&(t="/"+s.state.searchTerm),U.get("/members"+t).then((function(e){s.setState({members:e.data,isLoading:!1}),console.log(e)})).catch((function(e){console.log(e)}))},s.state={isLoading:!0,members:[],searchTerm:""},s.props.onNavbarTitleChange("All members"),s}return Object(d.a)(a,[{key:"simplifiedFunction",value:function(e){console.log(e)}},{key:"componentDidUpdate",value:function(e){e.search!==this.props.search&&(this.setState({searchTerm:this.props.search}),this.getData())}},{key:"componentDidMount",value:function(){this.getData()}},{key:"tabRow",value:function(){var e=this;return this.state.members.map((function(t,a){return Object(s.jsx)(se,{obj:t,getData:e.getData},a)}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)(Q.a,{component:Y.a,children:Object(s.jsxs)(J.a,{children:[Object(s.jsx)(W.a,{children:Object(s.jsxs)(X.a,{children:[Object(s.jsx)(K.a,{children:"ID"}),Object(s.jsx)(K.a,{align:"left",children:"Firstname"}),Object(s.jsx)(K.a,{align:"left",children:"Lastname"}),Object(s.jsx)(K.a,{align:"left",children:"Birthday"}),Object(s.jsx)(K.a,{align:"left",children:"Adress"}),Object(s.jsx)(K.a,{align:"right",children:"Actions"})]})}),Object(s.jsx)(H.a,{children:!this.state.isLoading&&(this.state.members.length>0?this.tabRow():Object(s.jsx)(X.a,{children:Object(s.jsx)(K.a,{align:"center",colSpan:5,children:"No data"})}))})]})}),this.state.isLoading&&Object(s.jsx)(z.a,{})]})}}]),a}(n.Component),ie=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsx)("p",{children:"View"})})}}]),a}(n.Component),re=function(e){Object(j.a)(a,e);var t=Object(u.a)(a);function a(e){var s;return Object(h.a)(this,a),(s=t.call(this,e)).handleNavbarTitleChange=s.handleNavbarTitleChange.bind(Object(b.a)(s)),s.state={search:"",navbartitle:"Main"},s}return Object(d.a)(a,[{key:"handleSearch",value:function(e){this.setState({search:e.target.value})}},{key:"handleNavbarTitleChange",value:function(e){this.setState({navbartitle:e})}},{key:"render",value:function(){var e=this;return Object(s.jsx)(o.a,{children:Object(s.jsxs)(g.a,{children:[Object(s.jsx)(R,{search:this.state.search,handleSearch:this.handleSearch.bind(this),navbartitle:this.state.navbartitle}),Object(s.jsx)("br",{}),Object(s.jsxs)(m.c,{children:[Object(s.jsx)(m.a,{path:"/view/:id",render:function(t){return Object(s.jsx)(ie,Object(l.a)({onNavbarTitleChange:e.handleNavbarTitleChange},t))}}),Object(s.jsx)(m.a,{exact:!0,path:"/create",render:function(){return Object(s.jsx)(V,{onNavbarTitleChange:e.handleNavbarTitleChange})}}),Object(s.jsx)(m.a,{path:"/edit/:id",render:function(t){return Object(s.jsx)(G,Object(l.a)({onNavbarTitleChange:e.handleNavbarTitleChange},t))}}),Object(s.jsx)(m.a,{path:"/",render:function(){return Object(s.jsx)(ne,{search:e.state.search,onNavbarTitleChange:e.handleNavbarTitleChange})}})]})]})})}}]),a}(n.Component);c.a.render(Object(s.jsx)(o.a,{children:Object(s.jsx)(re,{})}),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.4c67e5d4.chunk.js.map